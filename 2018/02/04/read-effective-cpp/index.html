<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>读Effective C++ | tigerose&#39;s site</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="C++," />
  

  <meta name="description" content="读Effective C++2018年一月份读书：《Effective C++：改善程序与设计的55个具体做法》 一月份利用晚上的时间粗读本书，算是对C++基础知识的复习与学习；按照章节顺序来读，前面部分较基础，后边涉及到泛型编程，看不太懂。 读完之后写下本篇，是对一月份学习的一个简要总结，督促后边继续学习，也是对本书内容进行索引总结，方便遇到具体问题快速查阅，以节省时间。 内容索引本书共介绍C+">
<meta property="og:type" content="article">
<meta property="og:title" content="读Effective C++">
<meta property="og:url" content="http://yoursite.com/2018/02/04/read-effective-cpp/index.html">
<meta property="og:site_name" content="tigerose&#39;s site">
<meta property="og:description" content="读Effective C++2018年一月份读书：《Effective C++：改善程序与设计的55个具体做法》 一月份利用晚上的时间粗读本书，算是对C++基础知识的复习与学习；按照章节顺序来读，前面部分较基础，后边涉及到泛型编程，看不太懂。 读完之后写下本篇，是对一月份学习的一个简要总结，督促后边继续学习，也是对本书内容进行索引总结，方便遇到具体问题快速查阅，以节省时间。 内容索引本书共介绍C+">
<meta property="article:published_time" content="2018-02-04T12:04:46.000Z">
<meta property="article:modified_time" content="2020-03-05T13:31:41.829Z">
<meta property="article:author" content="tigerose">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">

  

  
    <link rel="icon" href="/images/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    
<link rel="stylesheet" href="/css/personal-style.css">

  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?d4b892153a53af797abac43f46aac4dc";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="tigerose's site" type="application/atom+xml">
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#读Effective-C"><span class="toc-text">读Effective C++</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#内容索引"><span class="toc-text">内容索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-基础介绍"><span class="toc-text">1 基础介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-类的基础方法"><span class="toc-text">2 类的基础方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-资源管理"><span class="toc-text">3 资源管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-设计与声明"><span class="toc-text">4 设计与声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-实现"><span class="toc-text">5 实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-继承和面向对象设计"><span class="toc-text">6 继承和面向对象设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-模板和泛型编程"><span class="toc-text">7 模板和泛型编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-定制new和delete"><span class="toc-text">8 定制new和delete</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-杂项"><span class="toc-text">9 杂项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#下一步"><span class="toc-text">下一步</span></a></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-read-effective-cpp" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">读Effective C++</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2018.02.04</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>tigerose</span>
        </span>
      

      


      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp阅读 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <h1 id="读Effective-C"><a href="#读Effective-C" class="headerlink" title="读Effective C++"></a>读Effective C++</h1><p>2018年一月份读书：《Effective C++：改善程序与设计的55个具体做法》</p>
<p>一月份利用晚上的时间粗读本书，算是对C++基础知识的复习与学习；按照章节顺序来读，前面部分较基础，后边涉及到泛型编程，看不太懂。</p>
<p>读完之后写下本篇，是对一月份学习的一个简要总结，督促后边继续学习，也是对本书内容进行索引总结，方便遇到具体问题快速查阅，以节省时间。</p>
<h2 id="内容索引"><a href="#内容索引" class="headerlink" title="内容索引"></a>内容索引</h2><p>本书共介绍C++程序设计的55个准则，作者已按照类型划分不同分类：</p>
<h3 id="1-基础介绍"><a href="#1-基础介绍" class="headerlink" title="1 基础介绍"></a>1 基础介绍</h3><p>通用的也是常用的准则：</p>
<ol>
<li><strong>了解C++组成</strong>。四部分：基础C, Object-Oriented C++, Template C++(泛型编程), STL(程序库)</li>
<li>用<strong>const, enum, inline</strong>替换#define</li>
<li><strong>尽可能使用const</strong>。</li>
<li><strong>对象被使用前先初始化</strong>。比如声明变量时就赋初值，构造函数使用成员初值列表，而不要在函数内进行赋值</li>
</ol>
<h3 id="2-类的基础方法"><a href="#2-类的基础方法" class="headerlink" title="2 类的基础方法"></a>2 类的基础方法</h3><p>主要是这几个编译器会默认给你生成的类方法：默认构造函数，析构函数，拷贝构造函数，拷贝赋值操作符</p>
<ol>
<li><strong>如果不要编译器生成的，要明确拒绝</strong>。如将方法声明为private，并且不实现</li>
<li><strong>为多态基类声明virtual析构函数</strong></li>
<li><strong>别让异常逃离析构函数</strong>。析构函数要捕获异常，要么吞下它们，要么结束程序</li>
<li><strong>不在构造和析构过程调用virtual函数</strong>。</li>
<li>*<em>令operate＝返回一个reference to *this *</em>。为了支持连等赋值</li>
<li><strong>在operate＝中处理自我赋值</strong>。因为可能出现删除自己，再取自己内容的情况</li>
<li><strong>复制对象时勿忘其每一部分</strong>。</li>
</ol>
<h3 id="3-资源管理"><a href="#3-资源管理" class="headerlink" title="3 资源管理"></a>3 资源管理</h3><p>资源包括动态内存分配，以及文件描述符，互斥锁，数据库连接，sockets等。当你不再使用它时，必须还给系统，否则会导致内存泄漏。</p>
<p>使用对象来管理内存，主要是使用类的构造函数，析构函数，拷贝函数。如在构造函数中获得资源，并在析构函数中释放资源。</p>
<ol>
<li><strong>小心拷贝行为</strong>。禁止拷贝，使用引用计数法</li>
<li><strong>提供对原始资源的访问</strong>。设计时要保留访问原始数据的接口</li>
<li><strong>new和delete要采用相同形式</strong>。如new delete/ new[] delete[]</li>
<li><strong>以独立对象将newed对象置入智能指针</strong>。智能指针会自动释放资源</li>
</ol>
<h3 id="4-设计与声明"><a href="#4-设计与声明" class="headerlink" title="4 设计与声明"></a>4 设计与声明</h3><p>作者说，软件设计是令软件作出你希望它做出的事情，以一般性的构想开始，最终演变成十足的细节，以允许特殊接口的开发。</p>
<p>接口的设计，要易用，不易误用。应该向开源库学习，提供的接口清晰无歧义，并尽可能考虑各种输入与异常安全。</p>
<ol>
<li><strong>设计class犹如设计type</strong>。作者提出一系列问题，是在设计高效classes时需要考虑的</li>
<li><strong>使用传引用替换传值</strong>。传值涉及对象的拷贝，这就需要时间与空间成本；不过对内置类型，传值可能更好</li>
<li><strong>必须返回对象时，不要返回reference</strong>。最怕引用指向local stack对象</li>
<li><strong>将成员变量声明为private</strong>。封装，划分访问控制更安全</li>
<li><strong>宁以non-member non-friend替换member函数</strong>。增加封装性</li>
<li><strong>若所有参数皆需要类型转换，请采用non-member函数</strong></li>
<li><strong>考虑写不抛出异常的swap函数</strong>。</li>
</ol>
<h3 id="5-实现"><a href="#5-实现" class="headerlink" title="5 实现"></a>5 实现</h3><p>设计部分完成之后就该实现了，实现部分要多考虑一些细节问题，避免降低效率，代码膨胀，过度耦合，资源泄漏等问题。</p>
<ol>
<li><strong>尽可能延后变量定义式的出现时间</strong>。防止程序提前结束，导致不必要的构造和析构</li>
<li><strong>少做转型动作</strong>。也是会影响效率；尽量使用新式转换(四种)</li>
<li><strong>避免返回handles指向对象内部成分</strong>。</li>
<li><strong>为异常安全努力是值得的</strong>。不泄漏资源，不允许数据败坏</li>
<li><strong>了解inline</strong>。会被编译器替换，免除函数调用开销，但是可能会导致代码膨胀</li>
<li><strong>将文件间的编译依存关系降至最低</strong>。</li>
</ol>
<h3 id="6-继承和面向对象设计"><a href="#6-继承和面向对象设计" class="headerlink" title="6 继承和面向对象设计"></a>6 继承和面向对象设计</h3><p>我感觉这是C++的精华部分，也挺重要。</p>
<ol>
<li><strong>public继承表示is－a关系</strong>。</li>
<li><strong>避免遮掩继承而来的名称</strong>。作用域的遮掩行为；可使用using声明式使用基类的名称</li>
<li><strong>区分接口继承和实现继承</strong>。选择派生类是继承基类的接口，还是接口加实现</li>
<li><strong>考虑virtual函数以外的其他选择</strong>。作者提供了几个方案来替代虚函数</li>
<li><strong>绝不重新定义继承而来的non-virtual函数以及缺省参数值</strong>。virtual函数是动态绑定</li>
<li><strong>通过复合塑模出has-a或根据某物实现出</strong>。</li>
<li><strong>明智而审慎地使用private继承和多重继承</strong>。</li>
</ol>
<h3 id="7-模板和泛型编程"><a href="#7-模板和泛型编程" class="headerlink" title="7 模板和泛型编程"></a>7 模板和泛型编程</h3><p>关于模板和泛型编程，看的不是很懂，也没仔细看，这里就先直接拷贝作者的条款，以后再看有新的理解再修改补充。</p>
<ol>
<li><strong>了解隐式接口和编译器多态</strong></li>
<li><strong>了解typename的双重意义</strong></li>
<li><strong>学习处理模板化基类内的名称</strong></li>
<li><strong>将与参数无关的代码抽离templates</strong></li>
<li><strong>运用成员函数模板接受所有兼容类型</strong></li>
<li><strong>需要类型转换时请为模板定义非成员函数</strong></li>
<li><strong>请使用traits classes表现类型信息</strong></li>
<li><strong>认识template元编程</strong></li>
</ol>
<h3 id="8-定制new和delete"><a href="#8-定制new和delete" class="headerlink" title="8 定制new和delete"></a>8 定制new和delete</h3><p>手动管理内存，才能获得最佳的效率。</p>
<ol>
<li><strong>了解new－handler的行为</strong>。指定函数处理分配内存失败的情况</li>
<li><strong>了解new delete的合理替换时机</strong>。有许多理由需要定制，包括改善效能，对heap运用错误进行调试，收集heap使用信息</li>
<li><strong>编写new delete时需固守常规</strong>。包括一些固有的程式，以及异常情况的处理</li>
<li><strong>写了placement new也要写placement delete</strong>。placement版本的new是一个特定位置上的new，一般接受一个void*,指向对象被构造之处，防止出现内存分配成功，但构造函数失败导致的内存泄漏问题</li>
</ol>
<h3 id="9-杂项"><a href="#9-杂项" class="headerlink" title="9 杂项"></a>9 杂项</h3><ol>
<li><strong>不要轻忽编译器的警告</strong>。有可能因为错过警告而导致复杂的调试情况</li>
<li><strong>熟悉标准程序库</strong>。熟悉标准程序库，相当于在编写代码时拥有各种工具组件可以挑选，方便快速开发出程序，当然可能对部分对速度有更高要求的程序不太适用，但是通用性还是很高</li>
<li><strong>熟悉Boost</strong>。因为标准程序库多数是从Boost中取来，Boost功能也更强一些</li>
</ol>
<h2 id="下一步"><a href="#下一步" class="headerlink" title="下一步"></a>下一步</h2><p>本书非常经典，只读一遍还远无法掌握其精髓，之后需要多看，可能不同的时期看收获也是不一样的。</p>
<p>接下来准备粗读下《C++标准程序库》，了解标准程序库有哪些组件，将常用的记熟，不常用的需要的时候可以快速找到即可。</p>

    
  </div>

</article>


   

   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2017/11/23/%E6%8C%87%E9%92%88%E7%9A%84%E5%BC%95%E7%94%A8/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2018/03/05/%E8%AF%BB%E6%9C%9F%E8%B4%A7%E5%B8%82%E5%9C%BA%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
